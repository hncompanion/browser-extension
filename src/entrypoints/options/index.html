<!DOCTYPE html>
<html lang="en" class="h-full bg-gray-50 dark:bg-gray-800">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Hacker News Companion Options</title>
    <script src="options.js" type="module"></script>
    <meta name="manifest.open_in_tab" content="true"/>
</head>
<body class="flex items-center justify-center">
    <form class="w-full h-full overflow-y-auto">
        <div class="w-full h-full space-y-8 mx-auto my-auto max-w-3xl p-6">
            <div class="flex min-h-full flex-col justify-center p-8 m-4 rounded-xl shadow-xl mx-auto my-auto border border-gray-200/70 dark:border-white/10 bg-gray-200/70 dark:bg-gray-900/90"
                 style="min-width: 550px">
                <fieldset>
                    <legend class="text-base font-semibold text-gray-900 dark:text-white">Hacker News Companion Settings</legend>
                    <p class="mt-1 text-sm/6 text-gray-600 dark:text-gray-400 border-b border-gray-200 pb-2 dark:border-white/10">Select the LLM provider for summarization.</p>
                    <div class="mt-6 space-y-6">

                        <!--HN Companion Backend id="hn-companion-server-enabled" -->
                        <fieldset>
                            <legend class="sr-only">Hacker News Companion Settings</legend>
                            <div class="space-y-5">
                                <div class="flex gap-3 items-center">
                                    <div class="flex h-6 shrink-0 items-center">
                                        <div class="group grid size-4 grid-cols-1">
                                            <input id="hn-companion-server-enabled"
                                                   aria-describedby="hn-companion-server-description" name="comments"
                                                   type="checkbox" checked
                                                   class="col-start-1 row-start-1 appearance-none rounded border border-gray-300 bg-white checked:border-indigo-600 checked:bg-indigo-600 indeterminate:border-indigo-600 indeterminate:bg-indigo-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:checked:bg-gray-100 forced-colors:appearance-auto">
                                            <svg class="pointer-events-none col-start-1 row-start-1 size-3.5 self-center justify-self-center stroke-white group-has-[:disabled]:stroke-gray-950/25"
                                                 viewBox="0 0 14 14" fill="none">
                                                <path class="opacity-0 group-has-[:checked]:opacity-100"
                                                      d="M3 8L6 11L11 3.5" stroke-width="2" stroke-linecap="round"
                                                      stroke-linejoin="round"/>
                                                <path class="opacity-0 group-has-[:indeterminate]:opacity-100"
                                                      d="M3 7H11"
                                                      stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                        </div>
                                    </div>
                                    <div class="text-sm/6 text-gray-900 dark:text-white">
                                        <label for="hn-companion-server-enabled" class="font-medium">Load summary from Hacker News Companion Server</label>
                                    </div>
                                    <details class="inline-block relative" id="hn-companion-server-description">
                                        <summary class="list-none text-gray-400 hover:text-gray-500 cursor-pointer">
                                            <svg class="size-5 sm:size-4" viewBox="0 0 16 16" fill="currentColor"
                                                 aria-hidden="true">
                                                <path fill-rule="evenodd"
                                                      d="M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0Zm-6 3.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM7.293 5.293a1 1 0 1 1 .99 1.667c-.459.134-1.033.566-1.033 1.29v.25a.75.75 0 1 0 1.5 0v-.115a2.5 2.5 0 1 0-2.518-4.153.75.75 0 1 0 1.061 1.06Z"
                                                      clip-rule="evenodd"/>
                                            </svg>
                                        </summary>
                                        <div class="absolute left-0 -translate-x-32 mt-2 w-80 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-10 p-4 text-sm text-gray-600 dark:bg-gray-800 dark:text-white dark:outline-white/10 dark:focus:outline-indigo-500">
                                            <p class="font-medium mb-2">How this works:</p>
                                            <p>ðŸ’¡ The HN Companion server periodically fetches stories from the Hacker
                                                News homepage and creates LLM summaries which are cached on our servers.</p>
                                            <p class="pt-2">When enabled, cached summaries (if available) are displayed immediately without using your API keys.</p>
                                            <p class="pt-2">You can always generate a fresh summary using your selected provider if needed.</p>
                                        </div>
                                    </details>

                                </div>
                            </div>
                        </fieldset>

                        <div class="flex items-center">
                            <div aria-hidden="true" class="w-full border-t border-gray-300/70 dark:border-white/15"></div>
                            <div class="relative flex justify-center">
                                <span class="px-2 text-xs font-semibold uppercase tracking-wider text-gray-500 dark:bg-gray-900 dark:text-gray-400 whitespace-nowrap">LOCAL AI PROVIDER (Free Option)</span>
                            </div>
                            <div aria-hidden="true" class="w-full border-t border-gray-300/70 dark:border-white/15"></div>
                        </div>

                        <div class="space-y-4">
                            <!-- Ollama id="ollama" -->
                            <div class="rounded-xl border border-gray-200/70 bg-white/60 px-5 py-4 shadow-sm dark:border-white/10 dark:bg-gray-900/60 cursor-pointer" data-provider-card="ollama">
                                <div class="flex items-center justify-between gap-4">
                                    <div class="flex items-center gap-2">
                                        <input id="ollama" name="provider-selection" type="radio"
                                               class="relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white checked:border-indigo-600 checked:bg-indigo-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 dark:border-white/10 dark:bg-white/5 dark:checked:border-indigo-500 dark:checked:bg-indigo-500 dark:focus-visible:outline-indigo-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:before:bg-white/20 forced-colors:appearance-auto forced-colors:before:hidden [&:not(:checked)]:before:hidden">
                                        <label for="ollama" class="ml-1 block text-sm/6 font-medium text-gray-900 dark:text-white">Ollama</label>
                                        <span class="ml-2 hidden items-center rounded-full bg-indigo-50 px-2 py-0.5 text-xs font-semibold text-indigo-700 ring-1 ring-inset ring-indigo-500/20 dark:bg-indigo-500/20 dark:text-indigo-200" data-provider-chip="ollama">Selected</span>

                                        <details class="ml-1 inline-block relative">
                                            <summary class="list-none text-gray-400 hover:text-gray-500 cursor-pointer">
                                                <svg class="size-5 sm:size-4" viewBox="0 0 16 16" fill="currentColor"
                                                     aria-hidden="true">
                                                    <path fill-rule="evenodd"
                                                          d="M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0Zm-6 3.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM7.293 5.293a1 1 0 1 1 .99 1.667c-.459.134-1.033.566-1.033 1.29v.25a.75.75 0 1 0 1.5 0v-.115a2.5 2.5 0 1 0-2.518-4.153.75.75 0 1 0 1.061 1.06Z"
                                                          clip-rule="evenodd"/>
                                                </svg>
                                            </summary>
                                            <div class="absolute left-0 -translate-x-32  mt-2 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-10 p-4 text-sm text-gray-600 dark:bg-gray-800 dark:text-white dark:outline-white/10 dark:focus:outline-indigo-500">
                                                <p class="font-medium mb-2">ðŸŒŸ Local summarization using Ollama</p>
                                                <p class="mb-3">For this extension to work with <a href="https://ollama.com/" target="_blank" class="underline">Ollama</a>:</p>
                                                <ol class="list-decimal ml-4 space-y-2">
                                                    <li>Make sure Ollama is running to see the list of available models in the dropdown</li>
                                                    <li>Enable CORS for the extension:
                                                        <div class="mt-2 p-2 bg-gray-200 rounded font-mono text-xs dark:bg-gray-900 dark:text-white">
                                                            <p class="mb-1">On Mac (run on terminal):</p>
                                                            <code class="bg-gray-100 px-2 py-1 rounded block overflow-x-auto dark:bg-gray-800 dark:text-white">
                                                                OLLAMA_ORIGINS="chrome-extension://*,moz-extension://*" ollama serve
                                                            </code>
                                                        </div>
                                                        <div class="mt-2 p-2 bg-gray-200 rounded font-mono text-xs dark:bg-gray-900 dark:text-white">
                                                            <p class="mb-1">On Windows:</p>
                                                            <code class="bg-gray-100 px-2 py-1 rounded block overflow-x-auto dark:bg-gray-800 dark:text-white">
                                                                setx OLLAMA_ORIGINS "chrome-extension://*,moz-extension://*"
                                                                <br>
                                                                <br>
                                                                ollama serve
                                                            </code>
                                                        </div>
                                                    </li>
                                                    <li>Restart Ollama for the CORS settings to take effect</li>
                                                </ol>

                                                <p class="mt-3 text-xs text-gray-500">Note: The model dropdown will
                                                    automatically show your locally downloaded models when Ollama is running properly.
                                                    Make sure the CORS settings persist across machine restarts.</p>
                                            </div>
                                        </details>
                                    </div>
                                    <button type="button" class="flex size-8 items-center justify-center rounded-md border border-gray-300 bg-white/70 text-gray-500 shadow-sm hover:bg-white dark:border-gray-600 dark:bg-white/5 dark:text-gray-300" data-provider-toggle="ollama" aria-controls="ollama-body" aria-expanded="false">
                                        <span class="sr-only">Show Ollama settings</span>
                                        <svg viewBox="0 0 16 16" fill="currentColor" class="size-4 transition-transform" data-provider-chevron="ollama" aria-hidden="true">
                                            <path d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" fill-rule="evenodd" />
                                        </svg>
                                    </button>
                                </div>
                                <p class="mt-2 ml-7 text-xs text-gray-500 dark:text-gray-400">Local models running on your machine. No API key required.</p>
                                <div class="mt-4 ml-7 space-y-4 hidden" id="ollama-body" data-provider-body="ollama">
                                    <div>
                                        <label for="ollama-url" class="block text-sm/6 font-medium text-gray-900 dark:text-white">Ollama Server URL</label>
                                        <div class="mt-2">
                                            <input type="url" name="ollama-url" id="ollama-url" value="http://localhost:11434" placeholder="http://localhost:11434"
                                                   class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus-visible:outline-2 focus-visible:-outline-offset-2 focus-visible:outline-indigo-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:placeholder:text-gray-500 dark:focus-visible:outline-indigo-500">
                                        </div>
                                        <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">The base URL of your Ollama server (default: http://localhost:11434)</p>
                                    </div>
                                    <div>
                                        <label for="ollama-model" class="block text-sm/6 font-medium text-gray-900 dark:text-white">Select Ollama Model
                                            <span class="ml-3 inline-flex items-center rounded-md bg-yellow-50 px-2 py-1 text-xs font-medium text-yellow-800 ring-1 ring-inset ring-yellow-600/20">Make sure Ollama is running with CORS enabled</span>
                                        </label>
                                        <div class="mt-3 grid grid-cols-1">
                                            <select id="ollama-model"
                                                    name="ollama-model"
                                                    class="col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pl-3 pr-8 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus-visible:outline-2 focus-visible:-outline-offset-2 focus-visible:outline-indigo-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:*:bg-gray-800 dark:focus-visible:outline-indigo-500">
                                                <option value="llama2"></option>
                                            </select>
                                            <svg viewBox="0 0 16 16" fill="currentColor" data-slot="icon" aria-hidden="true" class="pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-500 sm:size-4 dark:text-gray-400">
                                                <path d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" fill-rule="evenodd" />
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="flex items-center">
                            <div aria-hidden="true" class="w-full border-t border-gray-300/70 dark:border-white/15"></div>
                            <div class="relative flex justify-center">
                                <span class="px-2 text-xs font-semibold uppercase tracking-wider text-gray-500 dark:bg-gray-900 dark:text-gray-400 whitespace-nowrap">HOSTED AI PROVIDERS (API key required)</span>
                            </div>
                            <div aria-hidden="true" class="w-full border-t border-gray-300/70 dark:border-white/15"></div>
                        </div>

                        <div class="space-y-4">
                            <!-- Google AI id="google" -->
                            <div class="rounded-xl border border-gray-200/70 bg-white/60 px-5 py-4 shadow-sm dark:border-white/10 dark:bg-gray-900/60 cursor-pointer" data-provider-card="google">
                                <div class="flex items-center justify-between gap-4">
                                    <div class="flex items-center gap-2">
                                        <input id="google" name="provider-selection" type="radio" checked
                                               class="relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white checked:border-indigo-600 checked:bg-indigo-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 dark:border-white/10 dark:bg-white/5 dark:checked:border-indigo-500 dark:checked:bg-indigo-500 dark:focus-visible:outline-indigo-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:before:bg-white/20 forced-colors:appearance-auto forced-colors:before:hidden [&:not(:checked)]:before:hidden">
                                        <label for="google" class="ml-1 block text-sm/6 font-medium text-gray-900 dark:text-white">Google AI</label>
                                        <span class="ml-2 hidden inline-flex items-center rounded-full bg-indigo-50 px-2 py-0.5 text-xs font-semibold text-indigo-700 ring-1 ring-inset ring-indigo-500/20 dark:bg-indigo-500/20 dark:text-indigo-200" data-provider-chip="google">Selected</span>
                                        <span class="ml-2 inline-flex items-center rounded-md bg-emerald-50 px-2 py-1 text-xs font-medium text-emerald-700 ring-1 ring-inset ring-emerald-600/20">Recommended</span>
                                    </div>
                                    <button type="button"
                                            class="flex size-8 items-center justify-center rounded-md border border-gray-300 bg-white/70 text-gray-500 shadow-sm hover:bg-white dark:border-gray-600 dark:bg-white/5 dark:text-gray-300" data-provider-toggle="google" aria-controls="google-body" aria-expanded="false">
                                        <span class="sr-only">Show Google AI settings</span>
                                        <svg viewBox="0 0 16 16" fill="currentColor" class="size-4 transition-transform"
                                             data-provider-chevron="google" aria-hidden="true">
                                            <path d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z"
                                                  clip-rule="evenodd" fill-rule="evenodd"/>
                                        </svg>
                                    </button>
                                </div>
                                <p class="mt-2 ml-7 text-xs text-gray-500 dark:text-gray-400">Best balance of speed and cost for most users.</p>
                                <div class="mt-4 ml-7 space-y-4 hidden" id="google-body" data-provider-body="google">
                                    <div class="mt-2 flex items-center gap-3">
                                        <div class="relative grow">
                                            <label for="google-key" class="sr-only">Enter Google AI API Key</label>
                                            <input type="password"
                                                   id="google-key"
                                                   name="google-key"
                                                   class="block w-full rounded-md bg-white px-3 py-1.5 pr-16 text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:placeholder:text-gray-500 dark:focus:outline-indigo-500"
                                                   placeholder="Enter Google AI API Key">
                                            <button type="button" class="absolute inset-y-0 right-2 my-auto rounded-md px-2 text-xs font-semibold text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200" data-toggle-visibility="google-key" aria-pressed="false">Show</button>
                                        </div>
                                        <details class="relative">
                                            <summary class="list-none text-gray-400 hover:text-gray-500 cursor-pointer">
                                                <svg class="size-5 sm:size-4" viewBox="0 0 16 16" fill="currentColor"
                                                     aria-hidden="true">
                                                    <path fill-rule="evenodd"
                                                          d="M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0Zm-6 3.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM7.293 5.293a1 1 0 1 1 .99 1.667c-.459.134-1.033.566-1.033 1.29v.25a.75.75 0 1 0 1.5 0v-.115a2.5 2 0 1 0-2.518-4.153.75.75 0 1 0 1.061 1.06Z"
                                                          clip-rule="evenodd"/>
                                                </svg>
                                            </summary>
                                            <div class="absolute right-0 mt-2 w-72 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-10 p-4 text-sm text-gray-600 dark:bg-gray-800 dark:text-white dark:outline-white/10 dark:focus:outline-indigo-500">
                                                ðŸ”‘ Get your API key from <a href="https://aistudio.google.com/apikey"
                                                                           target="_blank" class="underline">here</a>.
                                                <p class="pt-3"> API key is securely stored in your browser's local storage and can sync across
                                                your devices with browser sync. The key is transmitted only to the selected LLM provider when making requests.</p>
                                            </div>
                                        </details>
                                    </div>
                                    <div>
                                        <label for="google-model" class="block text-sm/6 font-medium text-gray-900 dark:text-gray-100">Select Google AI Model</label>
                                        <div class="mt-2 grid grid-cols-1">
                                            <select id="google-model" name="google-model"
                                                    class="col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pl-3 pr-8 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus-visible:outline-2 focus-visible:-outline-offset-2 focus-visible:outline-indigo-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:*:bg-gray-800 dark:focus-visible:outline-indigo-500">
                                                <option value="gemini-3-pro-preview">Gemini 3 Pro Preview</option>
                                                <option value="gemini-2.5-pro" selected>Gemini 2.5 Pro</option>
                                                <option value="gemini-flash-latest">Gemini Flash Latest</option>
                                                <option value="gemini-2.5-flash">Gemini 2.5 Flash</option>
                                                <option value="gemini-2.5-flash-lite">Gemini 2.5 Flash-Lite</option>
                                                <option value="gemini-2.0-flash">Gemini 2.0 Flash</option>
                                                <option value="gemini-2.0-flash-lite">Gemini 2.0 Flash Lite</option>
                                            </select>
                                            <svg viewBox="0 0 16 16" fill="currentColor" data-slot="icon" aria-hidden="true" class="pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-500 sm:size-4 dark:text-gray-400">
                                                <path d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" fill-rule="evenodd" />
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Anthropic id="anthropic" -->
                            <div class="rounded-xl border border-gray-200/70 bg-white/60 px-5 py-4 shadow-sm dark:border-white/10 dark:bg-gray-900/60 cursor-pointer" data-provider-card="anthropic">
                                <div class="flex items-center justify-between gap-4">
                                    <div class="flex items-center gap-2">
                                        <input id="anthropic" name="provider-selection" type="radio"
                                               class="relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white checked:border-indigo-600 checked:bg-indigo-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 dark:border-white/10 dark:bg-white/5 dark:checked:border-indigo-500 dark:checked:bg-indigo-500 dark:focus-visible:outline-indigo-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:before:bg-white/20 forced-colors:appearance-auto forced-colors:before:hidden [&:not(:checked)]:before:hidden">
                                        <label for="anthropic"
                                               class="ml-1 block text-sm/6 font-medium text-gray-900 dark:text-white">Anthropic</label>
                                        <span class="ml-2 hidden items-center rounded-full bg-indigo-50 px-2 py-0.5 text-xs font-semibold text-indigo-700 ring-1 ring-inset ring-indigo-500/20 dark:bg-indigo-500/20 dark:text-indigo-200" data-provider-chip="anthropic">Selected</span>
                                    </div>
                                    <button type="button" class="flex size-8 items-center justify-center rounded-md border border-gray-300 bg-white/70 text-gray-500 shadow-sm hover:bg-white dark:border-gray-600 dark:bg-white/5 dark:text-gray-300" data-provider-toggle="anthropic" aria-controls="anthropic-body" aria-expanded="false">
                                        <span class="sr-only">Show Anthropic settings</span>
                                        <svg viewBox="0 0 16 16" fill="currentColor" class="size-4 transition-transform" data-provider-chevron="anthropic" aria-hidden="true">
                                            <path d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" fill-rule="evenodd" />
                                        </svg>
                                    </button>
                                </div>
                                <p class="mt-2 ml-7 text-xs text-gray-500 dark:text-gray-400">Great quality for long summaries and deeper nuance.</p>
                                <div class="mt-4 ml-7 space-y-4 hidden" id="anthropic-body" data-provider-body="anthropic">
                                    <div class="mt-2 flex items-center gap-3">
                                        <div class="relative grow">
                                            <label for="anthropic-key" class="sr-only">Enter Anthropic API Key</label>
                                            <input type="password"
                                                   id="anthropic-key"
                                                   name="anthropic-key"
                                                   class="block w-full rounded-md bg-white px-3 py-1.5 pr-16 text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:placeholder:text-gray-500 dark:focus:outline-indigo-500"
                                                   placeholder="Enter Anthropic API Key">
                                            <button type="button" class="absolute inset-y-0 right-2 my-auto rounded-md px-2 text-xs font-semibold text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200" data-toggle-visibility="anthropic-key" aria-pressed="false">Show</button>
                                        </div>
                                        <details class="relative">
                                            <summary class="list-none text-gray-400 hover:text-gray-500 cursor-pointer">
                                                <svg class="size-5 sm:size-4" viewBox="0 0 16 16" fill="currentColor"
                                                     aria-hidden="true">
                                                    <path fill-rule="evenodd"
                                                          d="M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0Zm-6 3.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM7.293 5.293a1 1 0 1 1 .99 1.667c-.459.134-1.033.566-1.033 1.29v.25a.75.75 0 1 0 1.5 0v-.115a2.5 2 0 1 0-2.518-4.153.75.75 0 1 0 1.061 1.06Z"
                                                          clip-rule="evenodd"/>
                                                </svg>
                                            </summary>
                                            <div class="absolute right-0 mt-2 w-72 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-10 p-4 text-sm text-gray-600 dark:bg-gray-800 dark:text-white dark:outline-white/10 dark:focus:outline-indigo-500">
                                                ðŸ”‘ Get your API key from <a
                                                    href="https://console.anthropic.com/settings/keys"
                                                    target="_blank" class="underline">here</a>.
                                                <p class="pt-3"> API key is securely stored in your browser's local storage
                                                and can sync across your devices with browser sync. The key is transmitted only to the selected
                                                LLM provider when making requests.</p>
                                            </div>
                                        </details>
                                    </div>
                                    <div>
                                        <label for="anthropic-model" class="block text-sm font-medium text-gray-900 dark:text-gray-100">Select Anthropic Model</label>
                                        <div class="mt-2 grid grid-cols-1">
                                            <select id="anthropic-model"
                                                    name="anthropic-model"
                                                    class="col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pl-3 pr-8 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus-visible:outline-2 focus-visible:-outline-offset-2 focus-visible:outline-indigo-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:*:bg-gray-800 dark:focus-visible:outline-indigo-500">
                                                <option value="claude-opus-4-1" selected>Claude Opus 4.1</option>
                                                <option value="claude-sonnet-4-0">Claude Sonnet 4</option>
                                                <option value="claude-3-7-sonnet-latest">Claude 3.7 Sonnet</option>
                                                <option value="claude-3-5-sonnet-latest">Claude 3.5 Sonnet</option>
                                                <option value="claude-3-5-haiku-latest">Claude 3.5 Haiku</option>
                                                <option value="claude-3-opus-latest">Claude 3 Opus</option>
                                            </select>
                                            <svg viewBox="0 0 16 16" fill="currentColor" data-slot="icon" aria-hidden="true" class="pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-500 sm:size-4 dark:text-gray-400">
                                                <path d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" fill-rule="evenodd" />
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- OpenAI id="openai" -->
                            <div class="rounded-xl border border-gray-200/70 bg-white/60 px-5 py-4 shadow-sm dark:border-white/10 dark:bg-gray-900/60 cursor-pointer" data-provider-card="openai">
                                <div class="flex items-center justify-between gap-4">
                                    <div class="flex items-center gap-2">
                                        <input id="openai" name="provider-selection" type="radio"
                                               class="relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white checked:border-indigo-600 checked:bg-indigo-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 dark:border-white/10 dark:bg-white/5 dark:checked:border-indigo-500 dark:checked:bg-indigo-500 dark:focus-visible:outline-indigo-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:before:bg-white/20 forced-colors:appearance-auto forced-colors:before:hidden [&:not(:checked)]:before:hidden">
                                        <label for="openai" class="ml-1 block text-sm/6 font-medium text-gray-900 dark:text-white">OpenAI</label>
                                        <span class="ml-2 hidden items-center rounded-full bg-indigo-50 px-2 py-0.5 text-xs font-semibold text-indigo-700 ring-1 ring-inset ring-indigo-500/20 dark:bg-indigo-500/20 dark:text-indigo-200" data-provider-chip="openai">Selected</span>
                                    </div>
                                    <button type="button" class="flex size-8 items-center justify-center rounded-md border border-gray-300 bg-white/70 text-gray-500 shadow-sm hover:bg-white dark:border-gray-600 dark:bg-white/5 dark:text-gray-300" data-provider-toggle="openai" aria-controls="openai-body" aria-expanded="false">
                                        <span class="sr-only">Show OpenAI settings</span>
                                        <svg viewBox="0 0 16 16" fill="currentColor" class="size-4 transition-transform" data-provider-chevron="openai" aria-hidden="true">
                                            <path d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" fill-rule="evenodd" />
                                        </svg>
                                    </button>
                                </div>
                                <p class="mt-2 ml-7 text-xs text-gray-500 dark:text-gray-400">Reliable models with broad ecosystem support.</p>
                                <div class="mt-4 ml-7 space-y-4 hidden" id="openai-body" data-provider-body="openai">
                                    <div class="mt-2 flex items-center gap-3">
                                        <div class="relative grow">
                                            <label for="openai-key" class="sr-only">Enter OpenAI API Key</label>
                                            <input type="password"
                                                   id="openai-key"
                                                   name="openai-key"
                                                   placeholder="Enter OpenAI API Key"
                                                   class="block w-full rounded-md bg-white px-3 py-1.5 pr-16 text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:placeholder:text-gray-500 dark:focus:outline-indigo-500">
                                            <button type="button" class="absolute inset-y-0 right-2 my-auto rounded-md px-2 text-xs font-semibold text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200" data-toggle-visibility="openai-key" aria-pressed="false">Show</button>
                                        </div>
                                        <details class="relative">
                                            <summary class="list-none text-gray-400 hover:text-gray-500 cursor-pointer">
                                                <svg class="size-5 sm:size-4" viewBox="0 0 16 16" fill="currentColor"
                                                     aria-hidden="true">
                                                    <path fill-rule="evenodd"
                                                          d="M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0Zm-6 3.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM7.293 5.293a1 1 0 1 1 .99 1.667c-.459.134-1.033.566-1.033 1.29v.25a.75.75 0 1 0 1.5 0v-.115a2.5 2 0 1 0-2.518-4.153.75.75 0 1 0 1.061 1.06Z"
                                                          clip-rule="evenodd"/>
                                                </svg>
                                            </summary>
                                            <div class="absolute right-0 mt-2 w-72 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-10 p-4 text-sm text-gray-600 dark:bg-gray-800 dark:text-white dark:outline-white/10 dark:focus:outline-indigo-500">
                                                ðŸ”‘ Get your API key from <a href="https://platform.openai.com/api-keys"
                                                                           target="_blank" class="underline">here</a>.
                                                <p class="pt-3"> API key is securely stored in your browser's local storage
                                                and can sync across your devices with browser sync. The key is transmitted only to the selected
                                                LLM provider when making requests.</p>
                                            </div>
                                        </details>
                                    </div>
                                    <div>
                                        <label for="openai-model" class="block text-sm font-medium text-gray-900 dark:text-gray-100">Select OpenAI Model</label>
                                        <div class="mt-2 grid grid-cols-1">
                                            <select id="openai-model"
                                                    name="openai-model"
                                                    class="col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pl-3 pr-8 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 focus-visible:outline-2 focus-visible:-outline-offset-2 focus-visible:outline-indigo-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:*:bg-gray-800 dark:focus-visible:outline-indigo-500">
                                                <option value="gpt-5" selected>GPT-5</option>
                                                <option value="gpt-5-mini">GPT-5 mini</option>
                                                <option value="gpt-5-nano">GPT-5 nano</option>
                                                <option value="gpt-4.1-nano">GPT-4.1 nano</option>
                                                <option value="gpt-4">GPT-4</option>
                                                <option value="gpt-3.5-turbo">GPT-3.5 Turbo</option>
                                            </select>
                                            <svg viewBox="0 0 16 16" fill="currentColor" data-slot="icon" aria-hidden="true" class="pointer-events-none col-start-1 row-start-1 mr-2 size-5 self-center justify-self-end text-gray-500 sm:size-4 dark:text-gray-400">
                                                <path d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" fill-rule="evenodd" />
                                            </svg>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- OpenRouter id="openrouter" -->
                            <div class="rounded-xl border border-gray-200/70 bg-white/60 px-5 py-4 shadow-sm dark:border-white/10 dark:bg-gray-900/60 cursor-pointer" data-provider-card="openrouter">
                                <div class="flex items-center justify-between gap-4">
                                    <div class="flex items-center gap-2">
                                        <input id="openrouter" name="provider-selection" type="radio"
                                               class="relative size-4 appearance-none rounded-full border border-gray-300 bg-white before:absolute before:inset-1 before:rounded-full before:bg-white checked:border-indigo-600 checked:bg-indigo-600 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:border-gray-300 disabled:bg-gray-100 disabled:before:bg-gray-400 dark:border-white/10 dark:bg-white/5 dark:checked:border-indigo-500 dark:checked:bg-indigo-500 dark:focus-visible:outline-indigo-500 dark:disabled:border-white/5 dark:disabled:bg-white/10 dark:disabled:before:bg-white/20 forced-colors:appearance-auto forced-colors:before:hidden [&:not(:checked)]:before:hidden">
                                        <label for="openrouter"
                                               class="ml-1 block text-sm/6 font-medium text-gray-900 dark:text-white">OpenRouter</label>
                                        <span class="ml-2 hidden inline-flex items-center rounded-full bg-indigo-50 px-2 py-0.5 text-xs font-semibold text-indigo-700 ring-1 ring-inset ring-indigo-500/20 dark:bg-indigo-500/20 dark:text-indigo-200" data-provider-chip="openrouter">Selected</span>
                                    </div>
                                    <button type="button" class="flex size-8 items-center justify-center rounded-md border border-gray-300 bg-white/70 text-gray-500 shadow-sm hover:bg-white dark:border-gray-600 dark:bg-white/5 dark:text-gray-300" data-provider-toggle="openrouter" aria-controls="openrouter-body" aria-expanded="false">
                                        <span class="sr-only">Show OpenRouter settings</span>
                                        <svg viewBox="0 0 16 16" fill="currentColor" class="size-4 transition-transform" data-provider-chevron="openrouter" aria-hidden="true">
                                            <path d="M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" fill-rule="evenodd" />
                                        </svg>
                                    </button>
                                </div>
                                <p class="mt-2 ml-7 text-xs text-gray-500 dark:text-gray-400">Bring your own model identifier from OpenRouter.</p>
                                <div class="mt-4 ml-7 space-y-4 hidden" id="openrouter-body" data-provider-body="openrouter">
                                    <div class="mt-2 flex items-center gap-3">
                                        <div class="relative grow">
                                            <label for="openrouter-key" class="sr-only">Enter OpenRouter API Key</label>
                                            <input type="password"
                                                   id="openrouter-key"
                                                   name="openrouter-key"
                                                   placeholder="Enter OpenRouter API Key"
                                                   class="block w-full rounded-md bg-white px-3 py-1.5 pr-16 text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:placeholder:text-gray-500 dark:focus:outline-indigo-500">
                                            <button type="button" class="absolute inset-y-0 right-2 my-auto rounded-md px-2 text-xs font-semibold text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200" data-toggle-visibility="openrouter-key" aria-pressed="false">Show</button>
                                        </div>
                                        <details class="relative">
                                            <summary class="list-none text-gray-400 hover:text-gray-500 cursor-pointer">
                                                <svg class="size-5 sm:size-4" viewBox="0 0 16 16" fill="currentColor"
                                                     aria-hidden="true">
                                                    <path fill-rule="evenodd"
                                                          d="M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0Zm-6 3.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM7.293 5.293a1 1 0 1 1 .99 1.667c-.459.134-1.033.566-1.033 1.29v.25a.75.75 0 1 0 1.5 0v-.115a2.5 2 0 1 0-2.518-4.153.75.75 0 1 0 1.061 1.06Z"
                                                          clip-rule="evenodd"/>
                                                </svg>
                                            </summary>
                                            <div class="absolute right-0 mt-2 w-72 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-10 p-4 text-sm text-gray-600 dark:bg-gray-800 dark:text-white dark:outline-white/10 dark:focus:outline-indigo-500">
                                                ðŸ”‘ Get your API key from <a href="https://openrouter.ai/settings/keys"
                                                                           target="_blank" class="underline">here</a>
                                                and select a model <a href="https://openrouter.ai/models" class="underline"
                                                                      target="_blank">here</a>.
                                                <p class="pt-3"> API key is securely stored in your browser's local storage
                                                    and can sync across your devices with browser sync. The key is transmitted only to the
                                                    selected LLM provider when making requests.</p>
                                            </div>
                                        </details>
                                    </div>
                                    <div>
                                        <label for="openrouter-model" class="block text-sm font-medium text-gray-900 dark:text-gray-100">Enter OpenRouter Model</label>
                                        <div class="mt-2 grid grid-cols-1">
                                            <input type="text"
                                                   id="openrouter-model"
                                                   name="openrouter-model"
                                                   value="deepseek/deepseek-chat"
                                                   placeholder="Enter model identifier. e.g. deepseek/deepseek-chat"
                                                   class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6 dark:bg-white/5 dark:text-white dark:outline-white/10 dark:placeholder:text-gray-500 dark:focus:outline-indigo-500">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="flex items-center">
                            <div aria-hidden="true" class="w-full border-t border-gray-300/70 dark:border-white/15"></div>
                            <div class="relative flex justify-center">
                                <span class="px-2 text-xs font-semibold uppercase tracking-wider text-gray-500 dark:bg-gray-900 dark:text-gray-400 whitespace-nowrap">Prompt Customization</span>
                            </div>
                            <div aria-hidden="true" class="w-full border-t border-gray-300/70 dark:border-white/15"></div>
                        </div>

                        <div class="flex items-center justify-between">
                            <span class="flex grow flex-col">
                                <label id="prompt-customization-label" for="prompt-customization"
                                       class="text-sm/6 font-medium text-gray-900 dark:text-white">Enable prompt customization</label>
                                <span id="prompt-customization-description" class="text-sm text-gray-500 dark:text-gray-400">When disabled, the extension will use the default System and User prompt</span>
                            </span>
                            <div class="group relative inline-flex w-11 shrink-0 rounded-full bg-gray-200 p-0.5 inset-ring inset-ring-gray-900/15 outline-offset-2 outline-indigo-600 transition-colors duration-200 ease-in-out has-checked:bg-indigo-600 has-focus-visible:outline-2 dark:bg-white/5 dark:inset-ring-white/10 dark:outline-indigo-500 dark:has-checked:bg-indigo-500">
                                <span class="size-5 rounded-full bg-white shadow-xs ring-1 ring-gray-900/5 transition-transform duration-200 ease-in-out group-has-[:checked]:translate-x-5"></span>
                                <input id="prompt-customization" type="checkbox" name="prompt-customization"
                                                                                 aria-labelledby="prompt-customization-label" aria-describedby="prompt-customization-description"
                                                                                 class="absolute inset-0 appearance-none focus:outline-hidden"/>
                            </div>
                        </div>

                        <div id="prompt-customization-fields" class="mt-4 space-y-6 hidden">
                            <!-- User Prompt -->
                            <div>
                                <div class="flex items-center">

                                    <label for="user-prompt" class="block text-sm/6 font-medium text-gray-900 dark:text-white">User Prompt</label>
                                    <details class="ml-2 inline-block relative">
                                        <summary class="list-none text-gray-400 hover:text-gray-500 cursor-pointer">
                                            <svg class="size-5 sm:size-4" viewBox="0 0 16 16" fill="currentColor"
                                                 aria-hidden="true">
                                                <path fill-rule="evenodd"
                                                      d="M15 8A7 7 0 1 1 1 8a7 7 0 0 1 14 0Zm-6 3.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0ZM7.293 5.293a1 1 0 1 1 .99 1.667c-.459.134-1.033.566-1.033 1.29v.25a.75.75 0 1 0 1.5 0v-.115a2.5 2 0 1 0-2.518-4.153.75.75 0 1 0 1.061 1.06Z"
                                                      clip-rule="evenodd"/>
                                            </svg>
                                        </summary>
                                        <div class="absolute left-0 -translate-x-32 mt-2 bg-white rounded-md shadow-lg ring-1 ring-black ring-opacity-5 z-10 p-4 text-sm text-gray-600 dark:bg-gray-800 dark:text-white dark:outline-white/10 dark:focus:outline-indigo-500" style="min-width: 450px;">
                                            <p class="font-medium mb-2">â„¹ï¸ Important instructions for customizing User Prompt: â„¹ï¸</p>
                                            <p class="mb-3">The user prompt uses JavaScript template literals for dynamic content. You SHOULD use the following variables in your prompt:<br>
                                            <ol class="list-decimal ml-4 space-y-2">
                                                <li>`${title}`: The title of the Hacker News post.</li>
                                                <li>`${text}`: The formatted comment text.</li>
                                            </ol>
                                            <p class="mt-2 mb-2">
                                                <span class="font-medium">Example</span>:<br>
                                            <div class="mt-2 p-2 bg-gray-200 rounded font-mono text-xs dark:bg-gray-900 dark:text-white">
                                                <code class="bg-gray-100 px-2 py-1 rounded block overflow-x-auto dark:bg-gray-800 dark:text-white">
                                                    Summarize the following Hacker News post titled "${title}":\n\n${text}</code>
                                            </div>
                                            <p class="mt-3 text-xs text-gray-500">Note: Make sure to include both `${title}` and `${text}` for best results.</p>
                                        </div>
                                    </details>
                                </div>

                                <div class="mt-2">
                                    <textarea id="user-prompt" name="user-prompt" rows="6"
                                              class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6
                                              disabled:bg-gray-100 disabled:text-gray-500 disabled:outline-gray-200 disabled:placeholder:text-gray-300
                                              dark:bg-white/5 dark:text-white dark:outline-white/10 dark:placeholder:text-gray-500 dark:focus:outline-indigo-500
                                              dark:disabled:bg-white/5 dark:disabled:text-gray-400 dark:disabled:outline-white/5 dark:disabled:placeholder:text-gray-600"></textarea>
                                </div>

                            </div>

                            <!-- System Prompt -->
                            <div>
                                <label for="system-prompt" class="block text-sm/6 font-medium text-gray-900 dark:text-white">System Prompt</label>
                                <div class="mt-2">
                                    <textarea id="system-prompt" name="system-prompt" rows="6"
                                              class="block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-1 -outline-offset-1 outline-gray-300 placeholder:text-gray-400 focus:outline-2 focus:-outline-offset-2 focus:outline-indigo-600 sm:text-sm/6
                                              disabled:bg-gray-100 disabled:text-gray-500 disabled:outline-gray-200 disabled:placeholder:text-gray-300
                                              dark:bg-white/5 dark:text-white dark:outline-white/10 dark:placeholder:text-gray-500 dark:focus:outline-indigo-500
                                              dark:disabled:bg-white/5 dark:disabled:text-gray-400 dark:disabled:outline-white/5 dark:disabled:placeholder:text-gray-600"></textarea>
                                </div>
                            </div>
                        </div>

                        <div class="sticky bottom-0 -mx-8 mt-8 flex items-center justify-between gap-x-6 px-8 py-4 ">
                            <p class="text-xs text-gray-500 dark:text-gray-400">Changes are saved to your browser sync.</p>
                            <div class="flex items-center gap-x-4">
                                <button id="cancel-button" type="button" class="rounded-md bg-white px-3.5 py-2.5 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50">Cancel</button>
                                <button type="submit"
                                        class="rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">
                                    Save
                                </button>
                            </div>
                        </div>
                    </div>
                </fieldset>
            </div>
        </div>
    </form>

</body>
</html>
